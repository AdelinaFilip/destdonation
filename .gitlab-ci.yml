stages:
  - test
  - production

testing frontend:
  stage: test
  script:
    - cd client
    - npm ci
    - npm run test:CI

testing backend:
  stage: test
  script:
    - npm ci
    - npm run test:CI

deploying to heroku:
  stage: production
  script:
    - dpl --provider=heroku --app=shielded-savannah-74147 --api-key=$HEROKU_API_KEY
  environment:
    name: Heroku
    url: https://shielded-savannah-74147.herokuapp.com/

  only:
    - develop
    - master
